webpackJsonp([11],{524:function(e,t,n){var a=n(2)(n(565),n(625),function(e){n(648)},"data-v-a0312810",null);e.exports=a.exports},565:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(a,i){var e=s(15),o=s.n(e),t={enterModify:function(e){e.mode="modify"},save:function(t){if(!this.isModeSaving(t)){if(!t.value)return o.a.msg("频次不能为空");if(isNaN(t.value))return o.a.msg("频次请输入数字");if(t.value<=0)return o.a.msg("频次必须大于0");t.mode="saving";var e={channelId:t.channelId,channelTitle:t.name,freqNum:t.value},n=a.basePath+"/touchConfig/saveChannelFreqConfig.action";i.post(n,e).then(function(e){o.a.msg("修改成功"),t.mode="default"}).catch(function(){o.a.msg("修改失败"),t.mode="modify"})}},isModifyBtnVisible:function(e){return this.isModeDefault(e)},isModeDefault:function(e){return"default"===e.mode},isModeModify:function(e){return"modify"===e.mode},isModeSaving:function(e){return"saving"===e.mode},restore:function(e){for(var t={},n=0;n<e.length;n++){var a=e[n];t[a.channelId]=a.freqNum}for(var i=0;i<this.touchList.length;i++){var o=this.touchList[i];t[o.channelId]&&(o.value=t[o.channelId])}}};n.default={data:function(){return{loading:!1,touchList:[{channelId:"38",name:"和生活",value:void 0,mode:"default"},{channelId:"40",name:"随身厅-营销助手",value:void 0,mode:"default"},{channelId:"46",name:"实时在线-IVR",value:void 0,mode:"default"},{channelId:"47",name:"实时在线-弹窗",value:void 0,mode:"default"},{channelId:"48",name:"实时在线-官微",value:void 0,mode:"default"}]}},created:function(){},methods:t,computed:{},props:[],mounted:function(){var t=this;this.loading=!0,i.fetch2("/touchConfig/getChannelFreqConfig").then(function(e){t.loading=!1,t.restore(e)}).catch(function(){t.loading=!1})},mixins:[],beforeDestroy:function(){},components:{}}}.call(n,s(7),s(3))},591:function(e,t,n){(e.exports=n(0)()).push([e.i,".page-channel-freq-setting[data-v-a0312810]{padding:1px 20px}input[type=text][data-v-a0312810]{height:32px;padding:4px 12px;border:1px solid #ddd;border-radius:6px}",""])},625:function(e,t){e.exports={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"page-channel-freq-setting"},[a("h2",[n._v("触点频次限制")]),n._v(" "),a("table",{staticClass:"m-table"},[n._m(0),n._v(" "),a("tbody",n._l(n.touchList,function(t){return a("tr",[a("td",{domProps:{textContent:n._s(t.name)}}),n._v(" "),a("td",[a("input-number",{attrs:{disabled:n.isModeDefault(t)},model:{value:t.value,callback:function(e){n.$set(t,"value",e)},expression:"v.value"}})],1),n._v(" "),a("td",[n.loading?n._e():a("button",{directives:[{name:"show",rawName:"v-show",value:!n.isModifyBtnVisible(t),expression:"!isModifyBtnVisible(v)"}],staticClass:"btn btn-primary",attrs:{type:"button",disabled:n.isModeSaving(t)},on:{click:function(e){n.save(t)}}},[n._v("保存")]),n._v(" "),n.loading?n._e():a("button",{directives:[{name:"show",rawName:"v-show",value:n.isModifyBtnVisible(t),expression:"isModifyBtnVisible(v)"}],staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){n.enterModify(t)}}},[n._v("修改")])])])}),0)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("触点")]),e._v(" "),n("th",[e._v("频次")]),e._v(" "),n("th",[e._v("操作")])])])}]}},648:function(e,t,n){var a=n(591);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(1)("9b08ac48",a,!0,{})}});