webpackJsonp([12],{521:function(t,a,e){var s=e(2)(e(562),e(612),function(t){e(635)},"data-v-171afb0b",null);t.exports=s.exports},562:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(8),n=e(18),i="http://10.220.19.27:8080/iopgis/pages/regionbs.jsp",o={check:function(){return this.areaName.trim()?!!this.list.length||mlayer.msg("请绘制区域并保存数据"):mlayer.msg("请填写区域名称")},onSelectBS:function(t){var a,e,s;t.bsList&&(this.list=(a=t.bsList,e={},s=[],a.forEach(function(t){e[t]||(e[t]=1,s.push(t))}),s))}};o.save=function(){var a=this;if(!0===this.check()){var t,e=mlayer.loading(),s={name:this.areaName,cells:(t=this.list,t.map(function(t){var a=t.substr(0,4),e=t.substr(4);return parseInt(a,16)+"-"+parseInt(e,16)})).join(",")};this.vRequest.post("/iop/heatArea/save.action",s).then(function(t){mlayer.msg("提交成功！"),a.cleanAll(),e.close(),setTimeout(a.closeWindow,1800)}).catch(function(t){e.close();var a=t&&t.msg;mlayer.msg(a||"提交失败")})}},o.closeWindow=function(){var t=window.open("","_top","","true");t.opener=!0,t.close()},o.cleanAll=function(){this.areaName="",this.list=[]},o.clean=function(){confirm("确定清空已圈选的基站吗？")&&(this.list=[])},o.onBeforeUnload=function(){if(this.list.length)return"您圈选了基站但是没有提交，确定离开吗？"};var r={lacTip:function(){return this.list.length?"您圈选了"+this.list.length+"个基站":""}};a.default={data:function(){return{gisUrl:"about:blank",list:[],areaName:""}},created:function(){},methods:o,computed:r,watch:{},props:[],mounted:function(){var a=this;window.VM=this,window.onbeforeunload=this.onBeforeUnload,this.vRequest.fetch2("/common/gisToken").then(function(t){a.gisUrl=s.addParam(i,t)}).catch(function(){a.gisUrl=i}),n.on("selectBS",this.onSelectBS)},mixins:[],beforeDestroy:function(){n.off("selectBS",this.onSelectBS),window.onbeforeunload=null},components:{}}},578:function(t,a,e){(t.exports=e(0)()).push([t.i,"h3[data-v-171afb0b]{margin-top:1px}.page-add-hotarea[data-v-171afb0b]{background-color:#fff}.lb[data-v-171afb0b]{width:80px}.lb-1[data-v-171afb0b]{padding-top:8px}.col-2[data-v-171afb0b]{padding-left:17px}iframe.gis-iframe[data-v-171afb0b]{height:560px}.btn-box[data-v-171afb0b]{padding-left:97px}",""])},612:function(t,a){t.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"page-add-hotarea m-container"},[e("h3",[a._v("增加热门区域")]),a._v(" "),e("div",{staticClass:"m-row-mid-auto mt20 "},[e("div",{staticClass:"lb"},[a._v("区域名称：")]),a._v(" "),e("div",{staticClass:"col-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.areaName,expression:"areaName"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.areaName},on:{input:function(t){t.target.composing||(a.areaName=t.target.value)}}})]),a._v(" "),e("div",{staticClass:"pl10"},[a._v("\r\n            提示：热门区域保存成功后，可于第二日在“策略库-知识图谱-分场景行为分析”页面中查看该热门区域用户流量语音和APP使用行为分布。\r\n        ")])]),a._v(" "),e("div",{staticClass:"m-row mt15"},[e("div",{staticClass:"lb lb-1"},[a._v("选择范围：")]),a._v(" "),e("div",{staticClass:"pl10"},[e("iframe",{staticClass:"gis-iframe",attrs:{src:a.gisUrl,frameborder:"0",scrolling:"no"}})])]),a._v(" "),e("div",{staticClass:"btn-box"},[e("button",{staticClass:"btn btn-info",on:{click:a.save}},[a._v("提交热门区域")]),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.lacTip,expression:"lacTip"}],staticClass:"ml20 lac-tip",domProps:{textContent:a._s(a.lacTip)}}),a._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:0<a.list.length,expression:"list.length > 0"}],staticClass:"btn btn-danger ml20",on:{click:a.clean}},[a._v("清空基站")])])])},staticRenderFns:[]}},635:function(t,a,e){var s=e(578);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(1)("0880c07e",s,!0,{})}});