webpackJsonp([0],{526:function(t,e,n){var o=n(2)(n(567),n(627),function(t){n(650)},"data-v-c5c27cc4",null);t.exports=o.exports},532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={onClick:function(t){this.currIndex=t,this.$emit("click",t)}},i={mylist:function(){return this.list?this.list.split(";"):[]}};e.default={data:function(){return{currIndex:this.index||1}},methods:o,computed:i,props:["list","index"],mounted:function(){}}},533:function(t,e,n){(t.exports=n(0)()).push([t.i,".tab-btn-group>li[data-v-24b5e4ba]{display:inline-block}.tab-btn-group>li>a[data-v-24b5e4ba]{display:inline-block;color:#999;padding:15px 22px;font-size:18px;margin-right:10px}.tab-btn-group>li.active a[data-v-24b5e4ba]{color:#333;border-top:3px solid #5faee3;background-color:#fff;border-radius:5px 5px 0 0}",""])},534:function(t,e,n){var o=n(2)(n(532),n(535),function(t){n(536)},"data-v-24b5e4ba",null);t.exports=o.exports},535:function(t,e){t.exports={render:function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("ul",{staticClass:"tab-btn-group"},n._l(n.mylist,function(t,e){return o("li",{class:{active:e+1===n.currIndex}},[o("a",{attrs:{href:"javascript:;"},domProps:{textContent:n._s(t)},on:{click:function(t){n.onClick(e+1)}}})])}),0)},staticRenderFns:[]}},536:function(t,e,n){var o=n(533);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("429d3a50",o,!0,{})},537:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"methods",function(){return o}),n.d(e,"computed",function(){return i}),n.d(e,"components",function(){return a});var o={delayRefresh:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:300;setTimeout(function(){t.$emit("refresh")},e)}},i={mylist:function(){return this.list||[]},listEmpty:function(){return 0===this.mylist.length}},a={"table-empty":n(542),"table-loading":n(543)}},538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={columnCount:function(){return this.colspan||10},myMsg:function(){return this.msg||"没有内容"}};e.default={data:function(){return{}},methods:{},computed:o,props:["colspan","msg"],mounted:function(){}}},539:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={columnCount:function(){return this.colspan||10}};e.default={data:function(){return{}},methods:{},computed:o,props:["colspan"],mounted:function(){}}},540:function(t,e,n){(t.exports=n(0)()).push([t.i,"",""])},541:function(t,e,n){(t.exports=n(0)()).push([t.i,"",""])},542:function(t,e,n){var o=n(2)(n(538),n(545),function(t){n(547)},"data-v-e72f1e58",null);t.exports=o.exports},543:function(t,e,n){var o=n(2)(n(539),n(544),function(t){n(546)},"data-v-02a5c4fa",null);t.exports=o.exports},544:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("tfoot",[e("tr",[e("td",{staticClass:"pt10 pb10",attrs:{colspan:this.columnCount}},[e("vue-loading",{staticClass:"center-block"})],1)])])},staticRenderFns:[]}},545:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tbody",[n("tr",[n("td",{staticClass:"text-muted text-center",attrs:{colspan:t.columnCount},domProps:{textContent:t._s(t.myMsg)}})])])},staticRenderFns:[]}},546:function(t,e,n){var o=n(540);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("3edac47f",o,!0,{})},547:function(t,e,n){var o=n(541);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("c5baed48",o,!0,{})},548:function(t,e){var n={pagingCut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.list,n=t.page;void 0===n&&(n=this.curPage),void 0===e&&(e=this.allList);var o=(n-1)*this.pagePerNum,i=o+this.pagePerNum;return e.slice(o,i)},processPaging:function(t){return this.allList=t||[],this.pagingCut(this.allList,this.curPage)}},o={paging:function(){return{start:this.pagingStart,end:this.pagingEnd,totalCount:this.totalCount,curPage:this.curPage,totalPage:this.pagingTotalPage}},totalCount:function(){return this.allList.length},pagingStart:function(){return(this.curPage-1)*this.pagePerNum+1},pagingEnd:function(){var t=this.curPage*this.pagePerNum;return t>this.totalCount?this.totalCount:t},pagingTotalPage:function(){return Math.floor((this.totalCount-1)/this.pagePerNum)+1},pagePerNum:function(){return 20}};t.exports={props:[],data:function(){return{allList:[],curPage:1}},methods:n,computed:o,activated:function(){},deactivated:function(){},mounted:function(){},destroyed:function(){}}},554:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){var e={submit:function(){this.$emit("search",{priority:this.priority,startStopFlag:this.startStopFlag,keyword:this.keyword,contactId:this.contactId})}};n.default={data:function(){return{typeOptions:[],priority:"",startStopFlag:"",keyword:"",contactId:""}},created:function(){var e=this;t.getContactSelect().then(function(t){e.typeOptions=[{value:"",text:"全部"}].concat(t.map(function(t){return{value:t.contactId,text:t.contactDesc}}))})},methods:e,computed:{},mixins:[],props:[],mounted:function(){}}}.call(n,e(3))},555:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(i,a){var t={changeAll:function(t){var e=t.target.checked;this.list.forEach(function(t){t.checked=e})},onTrClick:function(t,e){var n=t.target,o=function(){e.checked=!e.checked};if("TD"===n.tagName)return o();if("SPAN"===n.tagName){var i=n.parentNode||n.parentElement;if(i&&"TD"===i.tagName)return o()}},modifyPriorityConfirm:function(e){var t={marketingActId:e.marketingActId,contactId:e.contactId,priority:e.priorityForEdit},n=i.ajaxUrlBase+"/contact/changePriority.action";i.op(n,t).then(function(t){e.priority=e.priorityForEdit,e.priorityDesc=a.contactPriorityHash[e.priority],e.isModeEdit=!1,mlayer.iconMsg(t.msg||"修改成功！")},function(){mlayer.msg(a.msg.opfail)})},modifyPriorityCancel:function(t){t.isModeEdit=!1},getActiveColorClass:function(t){return this.startVisible(t)?"text-warning":"text-success"},startVisible:function(t){return"启用"!==t.startStopDesc},stopIt:function(t){var e=this,n={marketingActId:t.marketingActId,contactId:t.contactId,startStopFlag:0},o=i.ajaxUrlBase+"/contact/changeStartStop.action";i.op(o,n).then(function(){mlayer.iconMsg("操作成功"),e.delayRefresh()},function(){mlayer.msg(a.msg.opfail)})},startIt:function(t){var e=this,n={marketingActId:t.marketingActId,contactId:t.contactId,startStopFlag:1},o=i.ajaxUrlBase+"/contact/changeStartStop.action";i.op(o,n).then(function(){mlayer.iconMsg("操作成功"),e.delayRefresh()},function(){mlayer.msg(a.msg.opfail)})},modifyPriority:function(t){t.isModeEdit=!0}},e={prioritySelectOptions:function(){var t=[];for(var e in a.contactPriorityHash)t.push({text:a.contactPriorityHash[e],value:e});return t},columnCount:function(){return 7}};n.default={data:function(){return{}},created:function(){},methods:t,computed:e,props:["list","loading"],mounted:function(){},mixins:[o(537)]}}.call(n,o(3),o(7))},567:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(i,a,e){var t={getCheckedJSON:function(){var e=[];return this.list.forEach(function(t){t.checked&&e.push({marketActId:t.marketingActId,contactId:t.contactId})}),e},batchStart:function(){var t=this,e=this.getCheckedJSON();if(0===e.length)return mlayer.msg("请选择要启用的记录");if(confirm("确定启用选中的"+e.length+"条记录吗？")){var n={json:JSON.stringify(e),startStopFlag:1},o=i.ajaxUrlBase+"/contact/changeStartStopMulti.action";i.op(o,n,"post").then(function(){mlayer.iconMsg(a.msg.opSuccess),t.delayCall(t.refresh)},function(){mlayer.msg(a.msg.opfail)})}},batchStop:function(){var t=this,e=this.getCheckedJSON();if(0===e.length)return mlayer.msg("请选择要停用的记录");if(confirm("确定启用停用的"+e.length+"条记录吗？")){var n={json:JSON.stringify(e),startStopFlag:0},o=i.ajaxUrlBase+"/contact/changeStartStopMulti.action";i.op(o,n,"post").then(function(){mlayer.iconMsg(a.msg.opSuccess),t.delayCall(t.refresh)},function(){mlayer.msg(a.msg.opfail)})}},search:function(t){t.page=1,this.fetchRender(e.filterEmpty(t))},refresh:function(){this.fetchRender()},fetchRender:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.view.loading=!0;var n=t.page||this.curPage;this.list=[],i.getContactList(t).then(function(t){t=e.adaptData(t),e.list=e.processPaging(t),e.curPage=n,e.view.loading=!1},function(){e.curPage=n,e.view.loading=!1})},onTableFooterClick:function(t){this.curPage=t,this.list=this.pagingCut({page:t})},adaptData:function(t){for(var e=0;e<t.length;e++){t[e].isModeEdit=!1,t[e].contactIdForEdit=t[e].contactId;var n=t[e].priorityDesc;t[e].priority=a.contactPriorityMap[n],t[e].priorityForEdit=t[e].priority,t[e].checked=!1}return t}};n.default={data:function(){return{view:{loading:!1},list:[]}},created:function(){this.fetchRender()},methods:t,computed:{},watch:{},props:[],mounted:function(){},mixins:[o(548)],destroyed:function(){},components:{"tab-btn-group":o(534),"table-filter":o(601),"v-table":o(602)}}}.call(n,o(3),o(7),o(5))},574:function(t,e,n){(t.exports=n(0)()).push([t.i,"",""])},590:function(t,e,n){(t.exports=n(0)()).push([t.i,".name-input[data-v-99c295e4]{width:140px}",""])},593:function(t,e,n){(t.exports=n(0)()).push([t.i,"",""])},601:function(t,e,n){var o=n(2)(n(554),n(624),function(t){n(647)},"data-v-99c295e4",null);t.exports=o.exports},602:function(t,e,n){var o=n(2)(n(555),n(608),function(t){n(631)},"data-v-05ee66b2",null);t.exports=o.exports},608:function(t,e){t.exports={render:function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("table",{staticClass:"table m-table m-hover event-list-table"},[e("thead",[e("tr",{staticClass:"tr-th-center"},[e("th",[e("input",{attrs:{type:"checkbox"},on:{change:function(t){r.changeAll(t)}}})]),r._v(" "),e("th",{staticClass:" "},[r._v("营销活动ID")]),r._v(" "),e("th",{staticClass:" "},[r._v("营销活动名称")]),r._v(" "),e("th",{staticClass:" "},[r._v("启停状态")]),r._v(" "),e("th",{staticClass:" "},[r._v("触点类型")]),r._v(" "),e("th",[r._v("优先级")]),r._v(" "),e("th",{staticClass:" "},[r._v("操作")])])]),r._v(" "),r.listEmpty?r._e():e("tbody",r._l(r.mylist,function(a){return e("tr",{key:a,staticClass:"tr-td-center",on:{click:function(t){r.onTrClick(t,a)}}},[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:a.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.checked)?-1<r._i(a.checked,null):a.checked},on:{change:function(t){var e=a.checked,n=t.target,o=!!n.checked;if(Array.isArray(e)){var i=r._i(e,null);n.checked?i<0&&r.$set(a,"checked",e.concat([null])):-1<i&&r.$set(a,"checked",e.slice(0,i).concat(e.slice(i+1)))}else r.$set(a,"checked",o)}}})]),r._v(" "),e("td",{domProps:{textContent:r._s(a.marketingActId)}}),r._v(" "),e("td",{domProps:{textContent:r._s(a.marketingActDesc)}}),r._v(" "),e("td",{class:[r.getActiveColorClass(a)],domProps:{textContent:r._s(a.startStopDesc)}}),r._v(" "),e("td",{},[e("span",{domProps:{textContent:r._s(a.contactDesc)}})]),r._v(" "),e("td",{},[e("span",{directives:[{name:"show",rawName:"v-show",value:!a.isModeEdit,expression:"!item.isModeEdit"}],domProps:{textContent:r._s(a.priorityDesc)}}),r._v(" "),a.isModeEdit?e("v-chosen",{attrs:{options:r.prioritySelectOptions},model:{value:a.priorityForEdit,callback:function(t){r.$set(a,"priorityForEdit",t)},expression:"item.priorityForEdit"}}):r._e(),r._v(" "),a.isModeEdit?e("button",{staticClass:"btn btn-primary ml10",attrs:{type:"button"},on:{click:function(t){r.modifyPriorityConfirm(a)}}},[r._v("确定")]):r._e(),r._v(" "),a.isModeEdit?e("button",{staticClass:"btn btn-default ml10",attrs:{type:"button"},on:{click:function(t){r.modifyPriorityCancel(a)}}},[r._v("取消")]):r._e()],1),r._v(" "),e("td",{},[r.startVisible(a)?e("a",{attrs:{href:"javascript:;"},on:{click:function(t){r.startIt(a)}}},[r._v("启用")]):e("a",{attrs:{href:"javascript:;"},on:{click:function(t){r.stopIt(a)}}},[r._v("停用")]),r._v(" "),e("a",{staticClass:"ml20",attrs:{href:"javascript:;"},on:{click:function(t){r.modifyPriority(a)}}},[r._v("修改优先级")])])])}),0),r._v(" "),r.listEmpty&&!r.loading?e("table-empty",{tag:"tbody",attrs:{colspan:r.columnCount}}):r._e(),r._v(" "),e("table-loading",{directives:[{name:"show",rawName:"v-show",value:r.loading,expression:"loading"}],tag:"tfoot",attrs:{colspan:r.columnCount}})],1)},staticRenderFns:[]}},624:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"form-inline",on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group mr30"},[n("label",{staticClass:"control-label",attrs:{for:""}},[e._v("优先级：")]),e._v(" "),n("v-chosen",{model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}},[n("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("高")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("中")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("低")])])],1),e._v(" "),n("div",{staticClass:"form-group mr30"},[n("label",{staticClass:"control-label",attrs:{for:""}},[e._v("启停状态：")]),e._v(" "),n("v-chosen",{model:{value:e.startStopFlag,callback:function(t){e.startStopFlag=t},expression:"startStopFlag"}},[n("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("启用")]),e._v(" "),n("option",{attrs:{value:"0"}},[e._v("停用")])])],1),e._v(" "),n("div",{staticClass:"form-group mr20"},[n("label",{staticClass:"control-label",attrs:{for:""}},[e._v("营销活动名称：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"form-control name-input",attrs:{type:"text"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("div",{staticClass:"form-group form-group-lg mr20"},[n("label",{staticClass:"control-label",attrs:{for:""}},[e._v("触点类型：")]),e._v(" "),n("v-chosen",{attrs:{options:e.typeOptions},model:{value:e.contactId,callback:function(t){e.contactId=t},expression:"contactId"}})],1),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.submit}},[e._v("查询")])])},staticRenderFns:[]}},627:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-comp"},[n("div",{staticClass:"m-container"},[n("page-title",{attrs:{main:"触点库",sub:"触点列表"}}),t._v(" "),n("tab-btn-group",{tag:"ul",staticClass:"mt30",attrs:{list:"触点查询"}}),t._v(" "),n("div",{staticClass:"panel p20"},[n("table-filter",{on:{search:t.search}})],1),t._v(" "),n("div",{staticClass:"multi-op-box"},[n("button",{staticClass:"btn btn-primary",on:{click:t.batchStart}},[n("i",{staticClass:"fa fa-play"}),t._v(" 批量启用\r\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-primary ml15",on:{click:t.batchStop}},[n("i",{staticClass:"fa fa-pause"}),t._v(" 批量停用\r\n            ")])]),t._v(" "),n("div",{staticClass:"table-panel mt20"},[n("v-table",{attrs:{list:t.list,loading:t.view.loading},on:{refresh:t.refresh}})],1),t._v(" "),n("table-footer",{ref:"tableFooter",tag:"div",attrs:{option:t.paging},on:{click:t.onTableFooterClick}})],1)])},staticRenderFns:[]}},631:function(t,e,n){var o=n(574);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("2d78e448",o,!0,{})},647:function(t,e,n){var o=n(590);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("0f3cf11e",o,!0,{})},650:function(t,e,n){var o=n(593);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(1)("1f775c08",o,!0,{})}});