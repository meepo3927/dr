webpackJsonp([4],{48:function(t,i){var a={setPromise:function(t,i){return this.promiseHolder[t]&&(this.promiseHolder[t].cancel(),this.promiseHolder[t]=null),this.promiseHolder[t]=i},cleanPromise:function(){for(var t in this.promiseHolder)if(this.promiseHolder.hasOwnProperty(t)){var i=this.promiseHolder[t];i&&i.cancel&&i.cancel(),i=null}this.promiseHolder={}}};t.exports={props:[],data:function(){return{}},methods:a,computed:{},created:function(){this.promiseHolder={}},mounted:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){this.cleanPromise()},mixins:[],components:{}}},522:function(t,i,a){var e=a(2)(a(563),a(619),function(t){a(642)},"data-v-57f7a358",null);t.exports=e.exports},553:function(t,i,a){var e={close:function(){this.$emit("close")},fetchRender:function(){var a=this,t={lacId:this.cid};this.o1=null,this.o2=null,this.o3=null,this.o4=null,this.o5=null,this.lacName="",this.vRequest.fetch2("/broadband/attackAndDefenseGuide",t).then(function(t){var i=t.lacBaseInfo||{};a.lacName=i.LAC_NAME,a.kpiList=[{name:"潜在家宽",value:i.POTENTIAL_HOME_BD},{name:"DOU",value:i.DOU+"G"},{name:"家庭ARPU",value:i.HOME_ARPU+"元"},{name:"个人ARPU",value:i.PERSON_ARPU+"元"}],t.feeRank?a.o1=a.getOption1(t.feeRank):a.o1="empty",t.ageComposition?a.o2=a.getOption2(t.ageComposition):a.o2="empty",t.jobComposition?a.o3=a.getOption3(t.jobComposition):a.o3="empty",t.lacWeekUserNum?a.o4=a.getOption4(t.lacWeekUserNum):a.o4="empty",t.lacDayUserNum?a.o5=a.getOption5(t.lacDayUserNum):a.o5="empty"}).catch(function(){a.o5=a.o4=a.o3=a.o2=a.o1="empty"})},getOption1:function(i){return i.sort(function(t,i){return t.value>i.value?1:-1}),{color:["#333","#8DC6FF"],title:{text:"资费排行"},xAxis:{type:"value",show:!1},grid:{top:this.GRID_BAR_TOP_TITLE,left:this.GRID_BAR_LEFT,right:this.GRID_BAR_RIGHT+5,bottom:this.GRID_BAR_BOTTOM,containLabel:!0},yAxis:{type:"category",axisTick:{show:!1},data:[5,4,3,2,1]},series:[this.getBarSeries({data:[0,0,0,0,0],label:{show:!0,position:"right",formatter:function(t){return i[t.dataIndex].name}}}),this.getBarSeries({data:i.map(function(t){return t.value}),label:{show:!0,position:"right",formatter:function(t){return t.value+"%"}}})]}},getOption2:function(t){return{title:{text:"年龄构成"},tooltip:this.getPieTooltip(),series:this.getPieSeries({data:t})}},getOption3:function(t){return{title:{text:"职业构成"},tooltip:this.getBarTooltip(),xAxis:{type:"category",data:t.map(function(t){return t.name}),axisLabel:{interval:0,rotate:20,align:"center",margin:22}},grid:{top:this.GRID_BAR_TOP_TITLE+20,left:this.GRID_BAR_LEFT,right:this.GRID_BAR_RIGHT-8,bottom:this.GRID_BAR_BOTTOM,containLabel:!0},yAxis:{type:"value",name:"(人)"},series:this.getBarSeries({data:t.map(function(t){return t.value}),label:{show:!0}})}},getOption4:function(t){return{title:{text:"小区每周客流分析"},tooltip:{trigger:"axis"},grid:{top:this.GRID_BAR_TOP_TITLE+20,left:this.GRID_BAR_LEFT,right:this.GRID_BAR_RIGHT,bottom:this.GRID_BAR_BOTTOM+10,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.map(function(t){return t.name})},yAxis:{type:"value",name:"(人)"},series:{type:"line",markPoint:this.getMinMaxMarkPoint(),markLine:this.getAverageMarkLine(),areaStyle:{color:this.getChartAreaGradient(this.vConfig.themeColor)},smooth:!0,data:t.map(function(t){return t.value})}}},getOption5:function(t){return{title:{text:"小区每日客流分析"},tooltip:{trigger:"axis"},grid:{top:this.GRID_BAR_TOP_TITLE+20,left:this.GRID_BAR_LEFT,right:this.GRID_BAR_RIGHT+15,bottom:this.GRID_BAR_BOTTOM+10,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,name:"(时)",data:t.map(function(t){return t.name})},yAxis:{type:"value",name:"(人)"},series:{type:"line",smooth:!0,markPoint:this.getMinMaxMarkPoint(),markLine:this.getAverageMarkLine(),areaStyle:{color:this.getChartAreaGradient(this.vConfig.themeColor)},data:t.map(function(t){return t.value})}}}},o={GRID_BAR_TOP_TITLE:function(){return 40},GRID_BAR_LEFT:function(){return 25},GRID_BAR_BOTTOM:function(){return 5},GRID_BAR_RIGHT:function(){return 30}};t.exports={data:function(){return{o1:null,o2:null,o3:null,o4:null,o5:null,lacName:"",kpiList:void 0}},created:function(){},methods:e,computed:o,watch:{},props:["cid"],mounted:function(){this.fetchRender()},mixins:[a(17)],beforeDestroy:function(){},components:{}}},563:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(a){var t=r(18),e=r.n(t),i={fetchRender:function(){var i=this;this.vRequest.fetch2("/broadband/query").then(function(t){i.list=t})},onItemClick:function(t){e.a.send("render_community",t.id,this.$refs.fm)},onGisReady:function(){this.isGisReady=!0;var t=a.user.branchId,i="400";t&&(i="4"+t.substr(0,2)),"400"===i&&(i="471"),e.a.send("color_by","star",this.$refs.fm),e.a.send("render_city",{cityId:i,countyId:"00"},this.$refs.fm)},showCoummnity:function(){this.layerCommunityVisible=!0},closeCommunity:function(){this.layerCommunityVisible=!1},communityAnalysis:function(t){this.communityId=t,this.showCoummnity()}},o={gisUrl:function(){return"http://10.220.19.32:9105/homebroadband/view/tdMap.html"},loadingSrc:function(){return this.vImgPath+"/loading_bar.gif"}};n.default={data:function(){return{list:void 0,communityId:"",layerCommunityVisible:!1}},created:function(){},methods:i,computed:o,watch:{},props:[],mounted:function(){window.VM=this,e.a.on("gis_ready",this.onGisReady),e.a.on("community_analysis",this.communityAnalysis),this.fetchRender()},mixins:[r(48)],beforeDestroy:function(){},components:{"community-chart-layer":r(600)}}}.call(n,r(7))},576:function(t,i,a){(t.exports=a(0)()).push([t.i,".center-layer-inner[data-v-10a11274]{position:relative;width:84vw}.my-close-btn[data-v-10a11274]{position:absolute;top:12px;right:8px;padding:12px}.my-close-btn i[data-v-10a11274]{font-size:22px}.v-head[data-v-10a11274]{border-bottom:1px solid #5faee3;background-color:#fff;padding:10px 8px 4px 25px;border-radius:6px 6px 0 0;height:77px}.v-head>h2[data-v-10a11274]{font-size:20px;float:left}.v-head>h2 i[data-v-10a11274]{color:#5faee3;font-size:22px}.v-head>ul[data-v-10a11274]{float:left;margin-left:50px;margin-right:20px}.v-head>ul li[data-v-10a11274]{display:inline-block;width:12vw;padding:10px 1px}.v-head>ul li>.v-content[data-v-10a11274]{text-align:center;border-right:2px solid #5faee3}.v-head>ul li>.v-content>div[data-v-10a11274]{color:#f36a5c;font-size:16px;font-weight:700}.v-head>ul li>.v-content>label[data-v-10a11274]{white-space:nowrap;font-size:13px}.v-head>ul li:first-child > .v-content[data-v-10a11274]{border-left:2px solid #5faee3}.v-body[data-v-10a11274]{padding:10px;background-color:#f7f7f7}.v-body h3[data-v-10a11274]{font-size:16px;border-left:4px solid #5faee3;height:14px;line-height:14px;padding-left:12px;margin:10px 0 12px 20px}.v-body .chart-row[data-v-10a11274]{margin:0 20px 15px;font-size:0}.v-body .chart-1[data-v-10a11274],.v-body .chart-2[data-v-10a11274],.v-body .chart-3[data-v-10a11274]{display:inline-block;width:33.3%;height:240px}.v-body .chart-1[data-v-10a11274]{padding-right:10px}.v-body .chart-2[data-v-10a11274]{padding-left:5px;padding-right:5px}.v-body .chart-3[data-v-10a11274]{padding-left:10px}.v-body .chart-4[data-v-10a11274],.v-body .chart-5[data-v-10a11274]{display:inline-block;width:50%;height:240px}.v-body .chart-4[data-v-10a11274]{padding-right:7px}.v-body .chart-5[data-v-10a11274]{padding-left:7px}",""])},585:function(t,i,a){(t.exports=a(0)()).push([t.i,".page-broadband[data-v-57f7a358]{padding:5px 15px 0}.main-wrapper[data-v-57f7a358]{height:calc(100vh - 65px);background-color:#fff;position:relative}.community-list-box[data-v-57f7a358]{position:absolute;top:0;left:0;width:280px;height:100%;border-right:1px solid #ccc;overflow-x:hidden;overflow-y:auto}.community-list-box .v-loading[data-v-57f7a358]{text-align:center;padding-top:30px}.community-list-box>ul>li[data-v-57f7a358]{border-bottom:1px dashed #ccc;position:relative;padding:15px 15px 15px 50px}.community-list-box>ul>li .v-number[data-v-57f7a358]{position:absolute;width:32px;height:32px;padding-top:4px;color:#fff;background:url("+a(596)+") no-repeat 50%;text-align:center;top:10px;left:10px}.community-list-box>ul>li .v-name[data-v-57f7a358]{font-size:16px;color:#0080ff;cursor:pointer}.community-list-box>ul>li .v-level[data-v-57f7a358]{font-size:13px;margin-top:4px}.community-list-box>ul>li .v-level strong[data-v-57f7a358]{color:#ea3944}.gis-wrapper[data-v-57f7a358]{margin-left:280px;height:100%}.gis-wrapper iframe[data-v-57f7a358]{width:100%;height:100%}",""])},596:function(t,i,a){t.exports=a.p+"img/map_marker_43092c4.png"},600:function(t,i,a){var e=a(2)(a(553),a(610),function(t){a(633)},"data-v-10a11274",null);t.exports=e.exports},610:function(t,i){t.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("center-layer",{staticClass:"community-chart-layer"},[e("div",{staticClass:"center-layer-inner"},[e("a",{staticClass:"my-close-btn",attrs:{href:"javascript:;",title:"关闭"},on:{click:a.close}},[e("i",{staticClass:"iconfont icon-guanbi"})]),a._v(" "),e("div",{staticClass:"v-head clearfix"},[e("h2",[e("i",{staticClass:"iconfont icon-xiaoqu"}),a._v(" "+a._s(a.lacName)+"\r\n            ")]),a._v(" "),a.kpiList?e("ul",a._l(a.kpiList,function(t,i){return e("li",[e("div",{staticClass:"v-content"},[e("div",{domProps:{textContent:a._s(t.value)}}),a._v(" "),e("label",{domProps:{textContent:a._s(t.name)}})])])}),0):a._e()]),a._v(" "),e("div",{staticClass:"v-body"},[e("h3",[a._v("业务特征")]),a._v(" "),e("div",{staticClass:"chart-row chart-row-1"},[e("div",{staticClass:"chart-1"},[e("my-chart",{attrs:{o:a.o1,theme:"community"}})],1),a._v(" "),e("div",{staticClass:"chart-2"},[e("my-chart",{attrs:{o:a.o2,theme:"community"}})],1),a._v(" "),e("div",{staticClass:"chart-3"},[e("my-chart",{attrs:{o:a.o3,theme:"community"}})],1)]),a._v(" "),e("h3",[a._v("时间特征")]),a._v(" "),e("div",{staticClass:"chart-row chart-row-2"},[e("div",{staticClass:"chart-4"},[e("my-chart",{attrs:{o:a.o4,theme:"community"}})],1),a._v(" "),e("div",{staticClass:"chart-5"},[e("my-chart",{attrs:{o:a.o5,theme:"community"}})],1)])])])])},staticRenderFns:[]}},619:function(t,i){t.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"page-broadband"},[e("page-title",{attrs:{main:"策略库",sub:"高价值潜在宽带客户小区分析"}}),a._v(" "),e("div",{staticClass:"main-wrapper"},[e("div",{staticClass:"community-list-box"},[a.list?e("ul",a._l(a.list,function(i,t){return e("li",[e("span",{staticClass:"v-number",domProps:{textContent:a._s(t+1)}}),a._v(" "),e("div",{staticClass:"v-name",attrs:{title:"定位到该小区"},domProps:{textContent:a._s(i.name)},on:{click:function(t){a.onItemClick(i)}}}),a._v(" "),e("div",{staticClass:"v-level"},[a._v("综合评分："),e("strong",[a._v(a._s(i.level))])])])}),0):a._e(),a._v(" "),void 0===a.list?e("div",{staticClass:"v-loading"},[e("img",{attrs:{src:a.loadingSrc}})]):a._e()]),a._v(" "),e("div",{staticClass:"gis-wrapper"},[e("iframe",{ref:"fm",attrs:{src:a.gisUrl,frameborder:"0",scrolling:"no"}})])]),a._v(" "),a.layerCommunityVisible?e("community-chart-layer",{attrs:{cid:a.communityId},on:{close:a.closeCommunity}}):a._e()],1)},staticRenderFns:[]}},633:function(t,i,a){var e=a(576);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a(1)("57a8d632",e,!0,{})},642:function(t,i,a){var e=a(585);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a(1)("7dcac8fa",e,!0,{})}});